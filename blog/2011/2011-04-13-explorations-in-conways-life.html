<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="">
  <meta name="dcterms.date" content="2011-04-13">
  <title>Explorations in Conway's Life</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
  </style>
  <link rel="stylesheet" href="/writ.min.css">
</head>
<body>
<header>
<h1>fabián cañas</h1>
<nav>
<ul>
  <li><a href='/'>about</a></li>
  <li><a href='/blog/'>writing</a></li>
  <li><a href='/software/'>software</a></li>
  |
  <li><a href='https://www.github.com/fcanas'>GitHub</a></li>
  <li><a href='https://www.twitter.com/fcanas'>Twitter</a></li>
</ul>
</nav>
</header>
<main>
<article>
<h1>Explorations in Conway's Life</h1>
<date>2011-04-13</date>
<p><a href="http://en.wikipedia.org/wiki/Conway">Conway's Game of Life</a> is a set of rules for a a cellular automata, an infinite lattice of cells that are either alive or dead at any step in time. A few simple rules form the basis for an entire universe of possibilities.</p>
<p>From Wikipedia: <blockquote></p>
<ol>
<li>Any live cell with fewer than two live neighbours dies, as if caused by under-population.</li>
<li>Any live cell with two or three live neighbours lives on to the next generation.</li>
<li>Any live cell with more than three live neighbours dies, as if by overcrowding.</li>
<li>Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction. </blockquote></li>
</ol>
<p>I came back to it to explore its potential as a virtual world for virtual agents to develop knowledge representations. I made a simple implementation in MATLAB to calculate a single time step:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1"></a>function grid = life(grid)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co">%   LIFE outputs the next step to a game of life</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">%       [GRID] = LIFE</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">%</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">%   Outputs the next step of conway&#39;s life</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">%</span></span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">% Number of neighbors:</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>neighbors = conv2(grid,[<span class="fl">1</span> <span class="fl">1</span> <span class="fl">1</span>; <span class="fl">1</span> <span class="fl">0</span> <span class="fl">1</span>; <span class="fl">1</span> <span class="fl">1</span> <span class="fl">1</span>],<span class="st">&#39;same&#39;</span>);</span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co">% Any live cell with fewer than two live neighbors dies, as if caused by under-population.</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>grid(neighbors&amp;lt;<span class="fl">2</span>) = <span class="fl">0</span>;</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co">% Any live cell with more than three live neighbors dies, as if by overcrowding.</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>grid(neighbors&gt;<span class="fl">3</span>) = <span class="fl">0</span>;</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co">% Any dead cell with exactly three live neighbors becomes a live cell, as if by reproduction.</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>grid(neighbors==<span class="fl">3</span>) = <span class="fl">1</span>;</span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="co">% Any live cell with two or three live neighbors lives on to the next generation.</span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="co">% free</span></span>
<span id="cb1-22"><a href="#cb1-22"></a>end <span class="co">% function</span></span></code></pre></div>
<p>Below is a standard visualization of a form called “Diehard”, so named because it has a lifespan of 130 steps, remarkable for a pattern with just 7 live cells to start:</p>
<blockquote>
<p>missing</p>
</blockquote>
<p>The real fun starts when I take each time step from a run and layer it on top of the previous one, creating a three-dimensional representation of the beast.</p>
<div class="video-wrapper"><div class="video cover" data-thumb="https://i.vimeocdn.com/video/144204536.jpg?mw=600&amp;mh=1578&amp;q=70" data-thumb-width="600" style="background-image: none;"><div class="telecine" style="transform: scale(1.0001408450704226);"><video preload="" src="https://06-lvl3-pdl.vimeocdn.com/01/4464/0/22320277/46472404.mp4?expires=1480787262&amp;token=0ce29e8223c4917030654" loop=""></video></div></div></div>
<p>If you want to play with the source, it's shown below.</p>
<p>I use inject as a utility to paste from a library of patterns into the “world” :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1"></a>function grid = inject(grid,pattern,x,y)</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="co">%     INJECT inject pattern into grid at position x, y</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="co">%         [GRID] =</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="co">%</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="co">%     inject pattern into grid at position x, y</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="co">%</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="co">%     Created by Fabian Canas on 2011-04-12.</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="co">%     Copyright © Fabian Canas. All rights reserved.</span></span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a>  [w,h] = size(pattern);</span>
<span id="cb2-11"><a href="#cb2-11"></a>  grid(x:(x+w-<span class="fl">1</span>),y:(y+h-<span class="fl">1</span>))=pattern;</span>
<span id="cb2-12"><a href="#cb2-12"></a>end <span class="co">% function</span></span></code></pre></div>
<p>And here's the script that generates the animation above:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1"></a>diehard = [ ...</span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">1</span> <span class="fl">0</span>; ...</span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fl">1</span> <span class="fl">1</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span>; ...</span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="fl">0</span> <span class="fl">1</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span> <span class="fl">1</span> <span class="fl">1</span> <span class="fl">1</span>; ...</span>
<span id="cb3-5"><a href="#cb3-5"></a>];</span>
<span id="cb3-6"><a href="#cb3-6"></a>g = zeros(<span class="fl">30</span>);</span>
<span id="cb3-7"><a href="#cb3-7"></a>g = inject(g,diehard,<span class="fl">15</span>,<span class="fl">15</span>);</span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a>fg = g;</span>
<span id="cb3-10"><a href="#cb3-10"></a>figure</span>
<span id="cb3-11"><a href="#cb3-11"></a>while (true)</span>
<span id="cb3-12"><a href="#cb3-12"></a>  gp = life(g);</span>
<span id="cb3-13"><a href="#cb3-13"></a>  if gp==g</span>
<span id="cb3-14"><a href="#cb3-14"></a>    break;</span>
<span id="cb3-15"><a href="#cb3-15"></a>  end</span>
<span id="cb3-16"><a href="#cb3-16"></a>  g = gp;</span>
<span id="cb3-17"><a href="#cb3-17"></a>  fg = cat(<span class="fl">3</span>,fg,g);</span>
<span id="cb3-18"><a href="#cb3-18"></a>end</span>
<span id="cb3-19"><a href="#cb3-19"></a></span>
<span id="cb3-20"><a href="#cb3-20"></a>h = patch(isosurface(fg));</span>
<span id="cb3-21"><a href="#cb3-21"></a></span>
<span id="cb3-22"><a href="#cb3-22"></a>axis equal</span>
<span id="cb3-23"><a href="#cb3-23"></a>axis off</span>
<span id="cb3-24"><a href="#cb3-24"></a></span>
<span id="cb3-25"><a href="#cb3-25"></a>light(<span class="st">&#39;Position&#39;</span>,[-<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">20</span>])</span>
<span id="cb3-26"><a href="#cb3-26"></a>lighting phong</span>
<span id="cb3-27"><a href="#cb3-27"></a>material([<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.5</span>,<span class="fl">30</span>])</span>
<span id="cb3-28"><a href="#cb3-28"></a>set(h,<span class="st">&#39;EdgeAlpha&#39;</span>,<span class="fl">0</span>)</span>
<span id="cb3-29"><a href="#cb3-29"></a>set(h,<span class="st">&#39;FaceColor&#39;</span>,[<span class="fl">0.2</span> <span class="fl">0.5</span> <span class="fl">0.1</span>],...</span>
<span id="cb3-30"><a href="#cb3-30"></a>      <span class="st">&#39;BackFaceLighting&#39;</span>,<span class="st">&#39;lit&#39;</span>)</span>
<span id="cb3-31"><a href="#cb3-31"></a>drawnow</span>
<span id="cb3-32"><a href="#cb3-32"></a>set(gcf, <span class="st">&#39;Position&#39;</span>, [<span class="fl">552</span> -<span class="fl">17</span> <span class="fl">200</span> <span class="fl">801</span>])</span>
<span id="cb3-33"><a href="#cb3-33"></a>for i=<span class="fl">0</span>:<span class="fl">179</span></span>
<span id="cb3-34"><a href="#cb3-34"></a>  view([i <span class="fl">0</span>])</span>
<span id="cb3-35"><a href="#cb3-35"></a>  print(gcf, <span class="st">&#39;-dtiff&#39;</span>, <span class="st">&#39;-r100&#39;</span>, sprintf(<span class="st">&#39;image_%04d&#39;</span>, i));</span>
<span id="cb3-36"><a href="#cb3-36"></a>  drawnow</span>
<span id="cb3-37"><a href="#cb3-37"></a>end</span></code></pre></div>
<p>Incidentally, I also worked out a few compact versions of Life in MATLB. The shortest of the two weights in at 85 characters, but runs indefinitely. The second outputs only nine steps to the console, which is about as long a run as you're likely to get given a random 9×9 grid:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1"></a>g=rand(<span class="fl">9</span>)&gt;<span class="fl">.5</span>;p=ones(<span class="fl">3</span>);p(<span class="fl">5</span>)=<span class="fl">0</span>;while(<span class="fl">1</span>)n=conv2(double(g),p,<span class="st">&#39;same&#39;</span>);g=(n==<span class="fl">3</span>|g&amp;n==<span class="fl">2</span>),end</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>g=rand(<span class="fl">9</span>)&gt;<span class="fl">.5</span>;p=ones(<span class="fl">3</span>);p(<span class="fl">5</span>)=<span class="fl">0</span>;for(i=[<span class="fl">1</span>:<span class="fl">9</span>])n=conv2(double(g),p,<span class="st">&#39;same&#39;</span>);g=(n==<span class="fl">3</span>|g&amp;n==<span class="fl">2</span>),end</span></code></pre></div>
<p>The longer of the three is more fun and actually draws the grid to a window. It's still lightweight at 105 characters. It too runs until you kill it:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1"></a>g=rand(<span class="fl">25</span>)&gt;<span class="fl">.5</span>;p=ones(<span class="fl">3</span>);p(<span class="fl">5</span>)=<span class="fl">0</span>;while(<span class="fl">1</span>)n=conv2(double(g),p,<span class="st">&#39;same&#39;</span>);g=(n==<span class="fl">3</span>|g&amp;n==<span class="fl">2</span>);imagesc(g);drawnow;end</span></code></pre></div>
</article>
</main>
</body>
</html>
